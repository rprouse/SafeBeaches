@model IQueryable<SafeBeaches.Models.Beach>

@section scripts
{
  <script src="http://openlayers.org/en/v3.0.0/build/ol.js" type="text/javascript"></script>

  <script type="text/javascript">
    var map = new ol.Map({
      target: 'map',
      layers: [
        new ol.layer.Tile({
          source: new ol.source.MapQuest({ layer: 'osm' })
        })
      ],
      view: new ol.View({
        center: ol.proj.transform([-79.90, 43.28], 'EPSG:4326', 'EPSG:3857'),
        zoom: 12
      })
    });
</script>
}

<div class="beaches">
  <div id="map" class="map"></div>

  <div class="list-group">
    @foreach (var beach in Model)
    {
      var reading = beach.GetLatestReading();
      var safe = reading.Safe ? "list-group-item-success" : "list-group-item-danger";
      var icon = reading.Safe ? "glyphicon-ok-circle" : "glyphicon-ban-circle";
      <a href="#" class="list-group-item @safe">
        <div class="row">
          <div class="col-xs-8">
            <h4 class="list-group-item-heading"><span class="glyphicon @icon" aria-hidden="true"></span> @beach.Name</h4>
          </div>
          <div class="col-xs-4"><p class="list-group-item-text text-right">@reading.Date.ToShortDateString()</p></div>
        </div>
      </a>
    }
  </div>
</div>